(()=>{var e={};e.id=960,e.ids=[960],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2055:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var i=t(482),s=t(9108),o=t(2563),n=t.n(o),a=t(8300),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);t.d(r,c);let l=["",{children:["confirmPay",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9387)),"/Users/alihasani/Workspace/mansoor/quize/app/confirmPay/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8550)),"/Users/alihasani/Workspace/mansoor/quize/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,429)),"/Users/alihasani/Workspace/mansoor/quize/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1429)),"/Users/alihasani/Workspace/mansoor/quize/app/not-found.tsx"]}],d=["/Users/alihasani/Workspace/mansoor/quize/app/confirmPay/page.tsx"],u="/confirmPay/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/confirmPay/page",pathname:"/confirmPay",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},5e3:(e,r,t)=>{Promise.resolve().then(t.bind(t,9176))},9176:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var i=t(5344),s=t(6103),o=t(9175),n=t(3121),a=t(3482),c=t(4373),l=t(2254),d=t(3729),u=t(708),p=t(9984),m=t(155),x=t(1175),h=t.n(x),g=t(9697),f=t(6975),b=t(3752);let v=e=>{let r="120000",t=new b.Z,x=t.get("Authorization"),f=(0,l.useSearchParams)().get("code"),[v,P]=(0,d.useState)("recivecode"),[w,k]=(0,d.useState)({phNumber:""}),z=window.location.href,[,{start:_,render:A,isStarted:T,reset:V,pause:I}]=(0,o.A$)(Number(r),1e3,"minutes"),{register:G,reset:U,watch:S,setValue:W,formState:{errors:Z}}=(0,u.cI)({defaultValues:{mobileNumber:"",VerificationCode:""},mode:"onChange"}),E=e=>{let r=e.target,t=r.value.replace(/[^\d]/g,"");r.value=t},{mutate:$,isLoading:M}=(0,c.D)(e=>(0,s.U)(Number("recivecode"===v?S("mobileNumber"):w.phNumber),z,x),{onSuccess:e=>{"true"===e.success&&(P("verificationcode"),k({phNumber:e.data.phoneNumber}),t.set("phoneNumber",e.data.phoneNumber),g.Am.success(e.data.verifySubtitle),"verificationcode"===v&&_()),"false"===e.success&&g.Am.error(e.message)},onError:e=>console.log(e,"error")}),{mutate:B,isLoading:D}=(0,c.D)(e=>(0,s.l)(w.phNumber,S("VerificationCode"),f,z),{onSuccess:e=>{"true"===e.success&&(g.Am.success(e.data.verifySubtitle),window.location.assign(e?.data?.resultLink)),"true"===e.success&&"404"===e.message&&g.Am.success(e.message),"false"===e.success&&g.Am.error(e.message)},onError:e=>{console.log(e)}});return(0,d.useEffect)(()=>{U(),"recivecode"===v&&I(),"verificationcode"===v&&_()},[v]),i.jsx(i.Fragment,{children:"recivecode"===v?(0,i.jsxs)(j,{errorTesxt:Z?.mobileNumber?.message,children:[i.jsx(n.ZT,{textalign:"center",fontWeight:700,children:"شماره موبایل خود را وارد کنید"}),(0,i.jsxs)(y,{errorTesxt:Z.mobileNumber?.message,className:"InputContainer",children:[i.jsx("input",{placeholder:"مثال : ۰۹۱۲۰۰۰۰۰۰۰",...G("mobileNumber",{onChange(e){W("mobileNumber",(0,a.Bo)(e.target.value.slice(0,11))),E(e)}})}),Z.mobileNumber?.message&&i.jsx(p.UYI,{})]}),i.jsx(N,{children:Z.mobileNumber?.message}),i.jsx(n.zx,{onClick:()=>{$({mobileNumber:S("mobileNumber")})},variant:"checkout",position:"fixed",disabled:!!Z.mobileNumber?.message||!S("mobileNumber"),children:M?i.jsx(n.tG,{justify:"center",children:i.jsx(h(),{color:"#ffff",type:"spin",width:20,height:20})}):i.jsx(n.ZT,{children:"تایید وادامه"})})]}):"verificationcode"===v&&(0,i.jsxs)(j,{errorTesxt:Z?.VerificationCode?.message,children:[(0,i.jsxs)(n.tG,{direction:"column",align:"center",gap:"10px",children:[i.jsx(n.ZT,{variant:"body1",textalign:"center",fontWeight:700,children:"کد تایید را وارد کنید"}),i.jsx(n.ZT,{variant:"subtitle2",children:`کد 5 رقمی به شماره ${w.phNumber} ارسال شده است.`})]}),(0,i.jsxs)(y,{errorTesxt:Z.VerificationCode?.message,className:"InputContainer",children:[i.jsx("input",{placeholder:"مثال : ۹۲۴۵۴",...G("VerificationCode",{onChange(e){W("VerificationCode",(0,a.Bo)(e.target.value.slice(0,5))),E(e)}})}),Z.VerificationCode?.message&&i.jsx(p.UYI,{})]}),i.jsx(N,{children:Z.VerificationCode?.message}),(0,i.jsxs)(C,{direction:"column",gap:"10px",children:[(0,i.jsxs)(n.tG,{children:[i.jsx(p.wF$,{fill:"#AAB3C0"}),i.jsx(q,{disabled:T,className:"typo",onClick:()=>{$({mobileNumber:w.phNumber})},children:"درخواست مجدد ارسال کد"}),i.jsx(n.ZT,{textcolor:"#AAB3C0",className:"typo",children:A(r)})]}),(0,i.jsxs)(n.tG,{align:"center",children:[i.jsx(m.yMw,{fill:"red"}),i.jsx(n.ZT,{className:"typo edit-btn",variant:"subtitle2",textcolor:"red",onClick:()=>P("recivecode"),children:"ویرایش شماره موبایل"})]})]}),i.jsx(n.zx,{onClick:()=>{B({verificationCode:S("VerificationCode"),mobileNumber:w.phNumber,code:f})},variant:"question",position:"fixed",disabled:!!Z.VerificationCode?.message||!S("VerificationCode"),children:D?i.jsx(n.tG,{justify:"center",children:i.jsx(h(),{color:"#ffff",type:"spin",width:20,height:20})}):i.jsx(n.ZT,{variant:"subtitle1",children:"مشاهده برنامه"})})]})})},j=f.zo.section.withConfig({componentId:"sc-c165532d-0"})(["padding-inline:16px;position:relative;padding-block:100px 40px;max-width:600px;margin:auto;display:flex;flex-direction:column;gap:20px;direction:rtl;input{::placeholder{opacity:50%;}}& .InputContainer:focus-within{border:",";}"],({errorTesxt:e})=>e?"1.5px solid red":"2px solid #02857a"),y=f.zo.div.withConfig({componentId:"sc-c165532d-1"})(["display:flex;align-items:center;gap:5px;border:",";height:50px;border-radius:4px;padding-inline:8px;cursor:pointer;input{outline:none;height:100%;width:100%;border:none;font-size:16px;color:",";}p{color:",";font-size:14px;}svg{scale:1.4;fill:red;}"],({errorTesxt:e})=>e?"1.5px solid red":"1.5px solid #02857a",({errorTesxt:e})=>e?"red":"#000",({errorTesxt:e})=>e?"red":"#000"),N=f.zo.p.withConfig({componentId:"sc-c165532d-2"})(["position:absolute;bottom:35px;font-size:10px;color:red;right:25px;"]),C=(0,f.zo)(n.tG).withConfig({componentId:"sc-c165532d-3"})(["padding-block:20px;.typo{font-size:12px;margin-right:5px;}.edit-btn{cursor:pointer;}"]),q=f.zo.button.withConfig({componentId:"sc-c165532d-4"})(["border-style:none;appearance:none;background-color:#fff;cursor:pointer;&:disabled{box-shadow:none;cursor:not-allowed;}"])},6103:(e,r,t)=>{"use strict";t.d(r,{U:()=>s,l:()=>o});var i=t(1039);let s=async(e,r,t)=>(await i.j.get("/login/setPhone.php",{params:{phoneNumber:e,href:r,token:t}})).data,o=async(e,r,t,s)=>(await i.j.get("/login/verifyPhone.php",{params:{phoneNumber:`${e}`,verification:r,code:t,href:s}})).data},9387:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>n});let i=(0,t(6843).createProxy)(String.raw`/Users/alihasani/Workspace/mansoor/quize/app/confirmPay/page.tsx`),{__esModule:s,$$typeof:o}=i,n=i.default}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[831,175,708,716,482,541],()=>t(2055));module.exports=i})();