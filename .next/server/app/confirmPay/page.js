(()=>{var e={};e.id=960,e.ids=[960],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},43825:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var i=t(50482),s=t(69108),o=t(62563),n=t.n(o),a=t(68300),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);t.d(r,c);let l=["",{children:["confirmPay",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79387)),"/Users/alihasani/Workspace/force/quiz-new-version/app/confirmPay/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8550)),"/Users/alihasani/Workspace/force/quiz-new-version/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,20429)),"/Users/alihasani/Workspace/force/quiz-new-version/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1429)),"/Users/alihasani/Workspace/force/quiz-new-version/app/not-found.tsx"]}],d=["/Users/alihasani/Workspace/force/quiz-new-version/app/confirmPay/page.tsx"],u="/confirmPay/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/confirmPay/page",pathname:"/confirmPay",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7376:(e,r,t)=>{Promise.resolve().then(t.bind(t,33101))},33101:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>N});var i=t(95344),s=t(81039);let o=async(e,r,t)=>(await s.j.get("/login/setPhone.php",{params:{phoneNumber:e,href:r,token:t}})).data,n=async(e,r,t,i)=>(await s.j.get("/login/verifyPhone.php",{params:{phoneNumber:`${e}`,verification:r,code:t,href:i}})).data;var a=t(79175),c=t(23121),l=t(13482),d=t(14373),u=t(22254),p=t(3729),m=t(60708),x=t(29984),h=t(57554);function f(e){return(0,h.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h3.75L17.81 9.94l-3.75-3.75L3 17.25V21zm2-2.92 9.06-9.06.92.92L5.92 19H5v-.92zM18.37 3.29a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34z"},child:[]}]})(e)}var g=t(31175),b=t.n(g),v=t(69697),j=t(16975),y=t(63752);let N=e=>{let r="120000",t=new y.Z,s=t.get("Authorization"),h=(0,u.useSearchParams)().get("code"),[g,j]=(0,p.useState)("recivecode"),[N,k]=(0,p.useState)({phNumber:""}),_=window.location.href,[,{start:A,render:V,isStarted:T,reset:I,pause:G}]=(0,a.A$)(Number(r),1e3,"minutes"),{register:S,reset:U,watch:W,setValue:Z,formState:{errors:E}}=(0,m.cI)({defaultValues:{mobileNumber:"",VerificationCode:""},mode:"onChange"}),M=e=>{let r=e.target,t=r.value.replace(/[^\d]/g,"");r.value=t},{mutate:$,isLoading:B}=(0,d.D)(e=>o(Number("recivecode"===g?W("mobileNumber"):N.phNumber),_,s),{onSuccess:e=>{"true"===e.success&&(j("verificationcode"),k({phNumber:e.data.phoneNumber}),t.set("phoneNumber",e.data.phoneNumber),v.Am.success(e.data.verifySubtitle),"verificationcode"===g&&A()),"false"===e.success&&v.Am.error(e.message)},onError:e=>console.log(e,"error")}),{mutate:L,isLoading:D}=(0,d.D)(e=>n(N.phNumber,W("VerificationCode"),h,_),{onSuccess:e=>{"true"===e.success&&(v.Am.success(e.data.verifySubtitle),window.location.assign(e?.data?.resultLink)),"true"===e.success&&"404"===e.message&&v.Am.success(e.message),"false"===e.success&&v.Am.error(e.message)},onError:e=>{console.log(e)}});return(0,p.useEffect)(()=>{U(),"recivecode"===g&&G(),"verificationcode"===g&&A()},[g]),i.jsx(i.Fragment,{children:"recivecode"===g?(0,i.jsxs)(w,{errorTesxt:E?.mobileNumber?.message,children:[i.jsx(c.ZT,{textalign:"center",fontWeight:700,children:"شماره موبایل خود را وارد کنید"}),(0,i.jsxs)(C,{errorTesxt:E.mobileNumber?.message,className:"InputContainer",children:[i.jsx("input",{placeholder:"مثال : ۰۹۱۲۰۰۰۰۰۰۰",...S("mobileNumber",{onChange(e){Z("mobileNumber",(0,l.Bo)(e.target.value.slice(0,11))),M(e)}})}),E.mobileNumber?.message&&i.jsx(x.UYI,{})]}),i.jsx(q,{children:E.mobileNumber?.message}),i.jsx(c.zx,{onClick:()=>{$({mobileNumber:W("mobileNumber")})},variant:"checkout",position:"fixed",disabled:!!E.mobileNumber?.message||!W("mobileNumber"),children:B?i.jsx(c.tG,{justify:"center",children:i.jsx(b(),{color:"#ffff",type:"spin",width:20,height:20})}):i.jsx(c.ZT,{children:"تایید وادامه"})})]}):"verificationcode"===g&&(0,i.jsxs)(w,{errorTesxt:E?.VerificationCode?.message,children:[(0,i.jsxs)(c.tG,{direction:"column",align:"center",gap:"10px",children:[i.jsx(c.ZT,{variant:"body1",textalign:"center",fontWeight:700,children:"کد تایید را وارد کنید"}),i.jsx(c.ZT,{variant:"subtitle2",children:`کد 5 رقمی به شماره ${N.phNumber} ارسال شده است.`})]}),(0,i.jsxs)(C,{errorTesxt:E.VerificationCode?.message,className:"InputContainer",children:[i.jsx("input",{placeholder:"مثال : ۹۲۴۵۴",...S("VerificationCode",{onChange(e){Z("VerificationCode",(0,l.Bo)(e.target.value.slice(0,5))),M(e)}})}),E.VerificationCode?.message&&i.jsx(x.UYI,{})]}),i.jsx(q,{children:E.VerificationCode?.message}),(0,i.jsxs)(P,{direction:"column",gap:"10px",children:[(0,i.jsxs)(c.tG,{children:[i.jsx(x.wF$,{fill:"#AAB3C0"}),i.jsx(z,{disabled:T,className:"typo",onClick:()=>{$({mobileNumber:N.phNumber})},children:"درخواست مجدد ارسال کد"}),i.jsx(c.ZT,{textcolor:"#AAB3C0",className:"typo",children:V(r)})]}),(0,i.jsxs)(c.tG,{align:"center",children:[i.jsx(f,{fill:"red"}),i.jsx(c.ZT,{className:"typo edit-btn",variant:"subtitle2",textcolor:"red",onClick:()=>j("recivecode"),children:"ویرایش شماره موبایل"})]})]}),i.jsx(c.zx,{onClick:()=>{L({verificationCode:W("VerificationCode"),mobileNumber:N.phNumber,code:h})},variant:"question",position:"fixed",disabled:!!E.VerificationCode?.message||!W("VerificationCode"),children:D?i.jsx(c.tG,{justify:"center",children:i.jsx(b(),{color:"#ffff",type:"spin",width:20,height:20})}):i.jsx(c.ZT,{variant:"subtitle1",children:"مشاهده برنامه"})})]})})},w=j.zo.section.withConfig({componentId:"sc-c165532d-0"})(["padding-inline:16px;position:relative;padding-block:100px 40px;max-width:600px;margin:auto;display:flex;flex-direction:column;gap:20px;direction:rtl;input{::placeholder{opacity:50%;}}& .InputContainer:focus-within{border:",";}"],({errorTesxt:e})=>e?"1.5px solid red":"2px solid #02857a"),C=j.zo.div.withConfig({componentId:"sc-c165532d-1"})(["display:flex;align-items:center;gap:5px;border:",";height:50px;border-radius:4px;padding-inline:8px;cursor:pointer;input{outline:none;height:100%;width:100%;border:none;font-size:16px;color:",";}p{color:",";font-size:14px;}svg{scale:1.4;fill:red;}"],({errorTesxt:e})=>e?"1.5px solid red":"1.5px solid #02857a",({errorTesxt:e})=>e?"red":"#000",({errorTesxt:e})=>e?"red":"#000"),q=j.zo.p.withConfig({componentId:"sc-c165532d-2"})(["position:absolute;bottom:35px;font-size:10px;color:red;right:25px;"]),P=(0,j.zo)(c.tG).withConfig({componentId:"sc-c165532d-3"})(["padding-block:20px;.typo{font-size:12px;margin-right:5px;}.edit-btn{cursor:pointer;}"]),z=j.zo.button.withConfig({componentId:"sc-c165532d-4"})(["border-style:none;appearance:none;background-color:#fff;cursor:pointer;&:disabled{box-shadow:none;cursor:not-allowed;}"])},79387:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>n});let i=(0,t(86843).createProxy)(String.raw`/Users/alihasani/Workspace/force/quiz-new-version/app/confirmPay/page.tsx`),{__esModule:s,$$typeof:o}=i,n=i.default}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[991,482,348],()=>t(43825));module.exports=i})();