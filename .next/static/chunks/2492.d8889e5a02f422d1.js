"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2492],{72492:function(e,i,o){o.r(i);var n=o(57437),t=o(10816),r=o(61865),s=o(91806),c=o(89701),l=o(54873),a=o(35691),d=o(55764),u=o(9583),p=o(24033),x=o(31605),f=o(65496),g=o(87415),h=o(73633),m=o.n(h),b=o(13402),v=o(2265),C=o(19573);let j=a.Ry().shape({VerificationCode:a.Z_()});i.default=e=>{var i,o,s,a,h;let{}=e,{push:A}=(0,p.useRouter)(),V=new f.Z,I=(0,p.useSearchParams)().get("code"),P=V.get("phoneNumber"),S="120000",[T,z]=(0,v.useState)(!1),[,{start:E,render:G,isStarted:_}]=(0,x.A$)(Number(S),1e3,"minutes"),B=window.location.href,D=V.get("Authorization"),{register:R,reset:U,watch:$,setValue:q,formState:{errors:F}}=(0,r.cI)({resolver:(0,c.X)(j),mode:"onChange"});(0,v.useEffect)(()=>{E()},[T]);let{mutate:L,isLoading:M}=(0,d.D)(e=>(0,u.l)(P,$("VerificationCode"),I,B),{onSuccess:e=>{if("true"===e.success){var i;g.Am.success(e.data.verifySubtitle),window.location.assign(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.resultLink)}"true"===e.success&&"404"===e.message&&g.Am.success(e.message),"false"===e.success&&g.Am.error(e.message)},onError:e=>{console.log(e)}}),{mutate:W}=(0,d.D)(e=>(0,u.U)(Number(P),B,D),{onSuccess:e=>{"true"===e.success&&(V.set("phoneNumber",e.data.phoneNumber),g.Am.success(e.data.verifySubtitle),E()),"false"===e.success&&g.Am.error(e.message)},onError:e=>console.log(e,"error")}),X=e=>{let i=e.target,o=i.value.replace(/[^\d]/g,"");i.value=o};return(0,n.jsxs)(w,{errorTesxt:null==F?void 0:null===(i=F.VerificationCode)||void 0===i?void 0:i.message,children:[(0,n.jsxs)(t.tG,{direction:"column",align:"center",gap:"10px",children:[(0,n.jsx)(t.ZT,{variant:"body1",textalign:"center",fontWeight:700,children:"کد تایید را وارد کنید"}),(0,n.jsx)(t.ZT,{variant:"subtitle2",children:"کد 5 رقمی به شماره ".concat(P," ارسال شده است.")})]}),(0,n.jsxs)(y,{errorTesxt:null===(o=F.VerificationCode)||void 0===o?void 0:o.message,className:"InputContainer",children:[(0,n.jsx)("input",{placeholder:"مثال : ۹۲۴۵۴",...R("VerificationCode",{onChange(e){q("VerificationCode",(0,C.Bo)(e.target.value.slice(0,5))),X(e)}})}),(null===(s=F.VerificationCode)||void 0===s?void 0:s.message)&&(0,n.jsx)(l.UYI,{})]}),(0,n.jsx)(N,{children:null===(a=F.VerificationCode)||void 0===a?void 0:a.message}),(0,n.jsxs)(Z,{direction:"column",gap:"10px",children:[(0,n.jsxs)(t.tG,{children:[(0,n.jsx)(l.wF$,{fill:"#AAB3C0"}),(0,n.jsx)(k,{disabled:_,className:"typo",onClick:()=>{W({mobileNumber:P})},children:"درخواست مجدد ارسال کد"}),(0,n.jsx)(t.ZT,{textcolor:"#AAB3C0",className:"typo",children:G(S)})]}),(0,n.jsxs)(t.tG,{align:"center",children:[(0,n.jsx)(b.yMw,{fill:"red"}),(0,n.jsx)(t.ZT,{className:"typo edit-btn",variant:"subtitle2",textcolor:"red",onClick:()=>A("/confirmPay/recivecode"),children:"ویرایش شماره موبایل"})]})]}),(0,n.jsx)(t.zx,{onClick:()=>{L({verificationCode:$("VerificationCode"),mobileNumber:P,code:I})},variant:"question",position:"fixed",disabled:!!(null===(h=F.VerificationCode)||void 0===h?void 0:h.message)||!$("VerificationCode"),children:M?(0,n.jsx)(t.tG,{justify:"center",children:(0,n.jsx)(m(),{color:"#ffff",type:"spin",width:20,height:20})}):(0,n.jsx)(t.ZT,{variant:"subtitle1",children:"مشاهده برنامه"})})]})};let w=s.ZP.section.withConfig({componentId:"sc-62e3ec0-0"})(["padding-inline:16px;position:relative;padding-block:100px 40px;max-width:600px;margin:auto;display:flex;flex-direction:column;gap:20px;& .InputContainer:focus-within{border:",";}"],e=>{let{errorTesxt:i}=e;return i?"1.5px solid red":"2px solid #02857a"}),y=s.ZP.div.withConfig({componentId:"sc-62e3ec0-1"})(["display:flex;align-items:center;gap:5px;border:",";height:50px;border-radius:4px;padding-inline:8px;cursor:pointer;direction:rtl;input{outline:none;height:100%;width:100%;border:none;font-size:14px;color:",";}p{color:",";font-size:14px;}svg{scale:1.4;fill:red;}"],e=>{let{errorTesxt:i}=e;return i?"1.5px solid red":"1.5px solid #a8a8a8"},e=>{let{errorTesxt:i}=e;return i?"red":"#000"},e=>{let{errorTesxt:i}=e;return i?"red":"#000"}),N=s.ZP.p.withConfig({componentId:"sc-62e3ec0-2"})(["position:absolute;bottom:140px;font-size:10px;color:red;right:25px;"]),Z=(0,s.ZP)(t.tG).withConfig({componentId:"sc-62e3ec0-3"})(["padding-block:20px;.typo{font-size:12px;margin-right:5px;}.edit-btn{cursor:pointer;}"]),k=s.ZP.button.withConfig({componentId:"sc-62e3ec0-4"})(["border-style:none;appearance:none;background-color:#fff;cursor:pointer;&:disabled{box-shadow:none;cursor:not-allowed;}"])}}]);