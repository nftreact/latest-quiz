(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4960],{80819:function(e,i,o){Promise.resolve().then(o.bind(o,64224))},64224:function(e,i,o){"use strict";o.r(i),o.d(i,{default:function(){return j}});var n=o(57437),r=o(694);let t=async(e,i,o)=>(await r.j.get("/login/setPhone.php",{params:{phoneNumber:e,href:i,token:o}})).data,s=async(e,i,o,n)=>(await r.j.get("/login/verifyPhone.php",{params:{phoneNumber:"".concat(e),verification:i,code:o,href:n}})).data;var c=o(31605),l=o(10816),a=o(19573),d=o(55764),u=o(24033),p=o(2265),m=o(61865),h=o(54873),f=o(13402),x=o(73633),b=o.n(x),g=o(87415),v=o(91806),N=o(65496),j=e=>{var i,o,r,x,v,j,V,A,I,T;let S="120000",Z=new N.Z,E=Z.get("Authorization"),G=(0,u.useSearchParams)().get("code"),[_,B]=(0,p.useState)("recivecode"),[P,D]=(0,p.useState)({phNumber:""}),F=window.location.href,[,{start:L,render:O,isStarted:U,reset:W,pause:Y}]=(0,c.A$)(Number(S),1e3,"minutes"),{register:$,reset:q,watch:M,setValue:H,formState:{errors:J}}=(0,m.cI)({defaultValues:{mobileNumber:"",VerificationCode:""},mode:"onChange"}),K=e=>{let i=e.target,o=i.value.replace(/[^\d]/g,"");i.value=o},{mutate:Q,isLoading:R}=(0,d.D)(e=>t(Number("recivecode"===_?M("mobileNumber"):P.phNumber),F,E),{onSuccess:e=>{"true"===e.success&&(B("verificationcode"),D({phNumber:e.data.phoneNumber}),Z.set("phoneNumber",e.data.phoneNumber),g.Am.success(e.data.verifySubtitle),"verificationcode"===_&&L()),"false"===e.success&&g.Am.error(e.message)},onError:e=>console.log(e,"error")}),{mutate:X,isLoading:ee}=(0,d.D)(e=>s(P.phNumber,M("VerificationCode"),G,F),{onSuccess:e=>{if("true"===e.success){var i;g.Am.success(e.data.verifySubtitle),window.location.assign(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.resultLink)}"true"===e.success&&"404"===e.message&&g.Am.success(e.message),"false"===e.success&&g.Am.error(e.message)},onError:e=>{console.log(e)}});return(0,p.useEffect)(()=>{q(),"recivecode"===_&&Y(),"verificationcode"===_&&L()},[_]),(0,n.jsx)(n.Fragment,{children:"recivecode"===_?(0,n.jsxs)(C,{errorTesxt:null==J?void 0:null===(i=J.mobileNumber)||void 0===i?void 0:i.message,children:[(0,n.jsx)(l.ZT,{textalign:"center",fontWeight:700,children:"شماره موبایل خود را وارد کنید"}),(0,n.jsxs)(w,{errorTesxt:null===(o=J.mobileNumber)||void 0===o?void 0:o.message,className:"InputContainer",children:[(0,n.jsx)("input",{placeholder:"مثال : ۰۹۱۲۰۰۰۰۰۰۰",...$("mobileNumber",{onChange(e){H("mobileNumber",(0,a.Bo)(e.target.value.slice(0,11))),K(e)}})}),(null===(r=J.mobileNumber)||void 0===r?void 0:r.message)&&(0,n.jsx)(h.UYI,{})]}),(0,n.jsx)(y,{children:null===(x=J.mobileNumber)||void 0===x?void 0:x.message}),(0,n.jsx)(l.zx,{onClick:()=>{Q({mobileNumber:M("mobileNumber")})},variant:"checkout",position:"fixed",disabled:!!(null===(v=J.mobileNumber)||void 0===v?void 0:v.message)||!M("mobileNumber"),children:R?(0,n.jsx)(l.tG,{justify:"center",children:(0,n.jsx)(b(),{color:"#ffff",type:"spin",width:20,height:20})}):(0,n.jsx)(l.ZT,{children:"تایید وادامه"})})]}):"verificationcode"===_&&(0,n.jsxs)(C,{errorTesxt:null==J?void 0:null===(j=J.VerificationCode)||void 0===j?void 0:j.message,children:[(0,n.jsxs)(l.tG,{direction:"column",align:"center",gap:"10px",children:[(0,n.jsx)(l.ZT,{variant:"body1",textalign:"center",fontWeight:700,children:"کد تایید را وارد کنید"}),(0,n.jsx)(l.ZT,{variant:"subtitle2",children:"کد 5 رقمی به شماره ".concat(P.phNumber," ارسال شده است.")})]}),(0,n.jsxs)(w,{errorTesxt:null===(V=J.VerificationCode)||void 0===V?void 0:V.message,className:"InputContainer",children:[(0,n.jsx)("input",{placeholder:"مثال : ۹۲۴۵۴",...$("VerificationCode",{onChange(e){H("VerificationCode",(0,a.Bo)(e.target.value.slice(0,5))),K(e)}})}),(null===(A=J.VerificationCode)||void 0===A?void 0:A.message)&&(0,n.jsx)(h.UYI,{})]}),(0,n.jsx)(y,{children:null===(I=J.VerificationCode)||void 0===I?void 0:I.message}),(0,n.jsxs)(k,{direction:"column",gap:"10px",children:[(0,n.jsxs)(l.tG,{children:[(0,n.jsx)(h.wF$,{fill:"#AAB3C0"}),(0,n.jsx)(z,{disabled:U,className:"typo",onClick:()=>{Q({mobileNumber:P.phNumber})},children:"درخواست مجدد ارسال کد"}),(0,n.jsx)(l.ZT,{textcolor:"#AAB3C0",className:"typo",children:O(S)})]}),(0,n.jsxs)(l.tG,{align:"center",children:[(0,n.jsx)(f.yMw,{fill:"red"}),(0,n.jsx)(l.ZT,{className:"typo edit-btn",variant:"subtitle2",textcolor:"red",onClick:()=>B("recivecode"),children:"ویرایش شماره موبایل"})]})]}),(0,n.jsx)(l.zx,{onClick:()=>{X({verificationCode:M("VerificationCode"),mobileNumber:P.phNumber,code:G})},variant:"question",position:"fixed",disabled:!!(null===(T=J.VerificationCode)||void 0===T?void 0:T.message)||!M("VerificationCode"),children:ee?(0,n.jsx)(l.tG,{justify:"center",children:(0,n.jsx)(b(),{color:"#ffff",type:"spin",width:20,height:20})}):(0,n.jsx)(l.ZT,{variant:"subtitle1",children:"مشاهده برنامه"})})]})})};let C=v.zo.section.withConfig({componentId:"sc-c165532d-0"})(["padding-inline:16px;position:relative;padding-block:100px 40px;max-width:600px;margin:auto;display:flex;flex-direction:column;gap:20px;direction:rtl;input{::placeholder{opacity:50%;}}& .InputContainer:focus-within{border:",";}"],e=>{let{errorTesxt:i}=e;return i?"1.5px solid red":"2px solid #02857a"}),w=v.zo.div.withConfig({componentId:"sc-c165532d-1"})(["display:flex;align-items:center;gap:5px;border:",";height:50px;border-radius:4px;padding-inline:8px;cursor:pointer;input{outline:none;height:100%;width:100%;border:none;font-size:16px;color:",";}p{color:",";font-size:14px;}svg{scale:1.4;fill:red;}"],e=>{let{errorTesxt:i}=e;return i?"1.5px solid red":"1.5px solid #02857a"},e=>{let{errorTesxt:i}=e;return i?"red":"#000"},e=>{let{errorTesxt:i}=e;return i?"red":"#000"}),y=v.zo.p.withConfig({componentId:"sc-c165532d-2"})(["position:absolute;bottom:35px;font-size:10px;color:red;right:25px;"]),k=(0,v.zo)(l.tG).withConfig({componentId:"sc-c165532d-3"})(["padding-block:20px;.typo{font-size:12px;margin-right:5px;}.edit-btn{cursor:pointer;}"]),z=v.zo.button.withConfig({componentId:"sc-c165532d-4"})(["border-style:none;appearance:none;background-color:#fff;cursor:pointer;&:disabled{box-shadow:none;cursor:not-allowed;}"])}},function(e){e.O(0,[7240,7699,5452,1821,6305,6051,5539,4015,9197,3633,2533,9573,816,9213,2971,4938,1744],function(){return e(e.s=80819)}),_N_E=e.O()}]);