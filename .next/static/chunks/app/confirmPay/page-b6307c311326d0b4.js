(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4960],{81791:function(e,i,o){Promise.resolve().then(o.bind(o,31118))},31118:function(e,i,o){"use strict";o.r(i);var n=o(57437),r=o(9583),t=o(31605),s=o(10816),c=o(19573),l=o(55764),a=o(24033),d=o(2265),u=o(61865),p=o(54873),m=o(13402),h=o(73633),f=o.n(h),x=o(87415),b=o(91806),g=o(65496);i.default=e=>{var i,o,h,b,y,k,z,V,A,I;let T="120000",S=new g.Z,Z=S.get("Authorization"),E=(0,a.useSearchParams)().get("code"),[G,_]=(0,d.useState)("recivecode"),[B,P]=(0,d.useState)({phNumber:""}),U=window.location.href,[,{start:D,render:F,isStarted:L,reset:O,pause:W}]=(0,t.A$)(Number(T),1e3,"minutes"),{register:Y,reset:$,watch:q,setValue:M,formState:{errors:H}}=(0,u.cI)({defaultValues:{mobileNumber:"",VerificationCode:""},mode:"onChange"}),J=e=>{let i=e.target,o=i.value.replace(/[^\d]/g,"");i.value=o},{mutate:K,isLoading:Q}=(0,l.D)(e=>(0,r.U)(Number("recivecode"===G?q("mobileNumber"):B.phNumber),U,Z),{onSuccess:e=>{"true"===e.success&&(_("verificationcode"),P({phNumber:e.data.phoneNumber}),S.set("phoneNumber",e.data.phoneNumber),x.Am.success(e.data.verifySubtitle),"verificationcode"===G&&D()),"false"===e.success&&x.Am.error(e.message)},onError:e=>console.log(e,"error")}),{mutate:R,isLoading:X}=(0,l.D)(e=>(0,r.l)(B.phNumber,q("VerificationCode"),E,U),{onSuccess:e=>{if("true"===e.success){var i;x.Am.success(e.data.verifySubtitle),window.location.assign(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.resultLink)}"true"===e.success&&"404"===e.message&&x.Am.success(e.message),"false"===e.success&&x.Am.error(e.message)},onError:e=>{console.log(e)}});return(0,d.useEffect)(()=>{$(),"recivecode"===G&&W(),"verificationcode"===G&&D()},[G]),(0,n.jsx)(n.Fragment,{children:"recivecode"===G?(0,n.jsxs)(v,{errorTesxt:null==H?void 0:null===(i=H.mobileNumber)||void 0===i?void 0:i.message,children:[(0,n.jsx)(s.ZT,{textalign:"center",fontWeight:700,children:"شماره موبایل خود را وارد کنید"}),(0,n.jsxs)(N,{errorTesxt:null===(o=H.mobileNumber)||void 0===o?void 0:o.message,className:"InputContainer",children:[(0,n.jsx)("input",{placeholder:"مثال : ۰۹۱۲۰۰۰۰۰۰۰",...Y("mobileNumber",{onChange(e){M("mobileNumber",(0,c.Bo)(e.target.value.slice(0,11))),J(e)}})}),(null===(h=H.mobileNumber)||void 0===h?void 0:h.message)&&(0,n.jsx)(p.UYI,{})]}),(0,n.jsx)(j,{children:null===(b=H.mobileNumber)||void 0===b?void 0:b.message}),(0,n.jsx)(s.zx,{onClick:()=>{K({mobileNumber:q("mobileNumber")})},variant:"checkout",position:"fixed",disabled:!!(null===(y=H.mobileNumber)||void 0===y?void 0:y.message)||!q("mobileNumber"),children:Q?(0,n.jsx)(s.tG,{justify:"center",children:(0,n.jsx)(f(),{color:"#ffff",type:"spin",width:20,height:20})}):(0,n.jsx)(s.ZT,{children:"تایید وادامه"})})]}):"verificationcode"===G&&(0,n.jsxs)(v,{errorTesxt:null==H?void 0:null===(k=H.VerificationCode)||void 0===k?void 0:k.message,children:[(0,n.jsxs)(s.tG,{direction:"column",align:"center",gap:"10px",children:[(0,n.jsx)(s.ZT,{variant:"body1",textalign:"center",fontWeight:700,children:"کد تایید را وارد کنید"}),(0,n.jsx)(s.ZT,{variant:"subtitle2",children:"کد 5 رقمی به شماره ".concat(B.phNumber," ارسال شده است.")})]}),(0,n.jsxs)(N,{errorTesxt:null===(z=H.VerificationCode)||void 0===z?void 0:z.message,className:"InputContainer",children:[(0,n.jsx)("input",{placeholder:"مثال : ۹۲۴۵۴",...Y("VerificationCode",{onChange(e){M("VerificationCode",(0,c.Bo)(e.target.value.slice(0,5))),J(e)}})}),(null===(V=H.VerificationCode)||void 0===V?void 0:V.message)&&(0,n.jsx)(p.UYI,{})]}),(0,n.jsx)(j,{children:null===(A=H.VerificationCode)||void 0===A?void 0:A.message}),(0,n.jsxs)(C,{direction:"column",gap:"10px",children:[(0,n.jsxs)(s.tG,{children:[(0,n.jsx)(p.wF$,{fill:"#AAB3C0"}),(0,n.jsx)(w,{disabled:L,className:"typo",onClick:()=>{K({mobileNumber:B.phNumber})},children:"درخواست مجدد ارسال کد"}),(0,n.jsx)(s.ZT,{textcolor:"#AAB3C0",className:"typo",children:F(T)})]}),(0,n.jsxs)(s.tG,{align:"center",children:[(0,n.jsx)(m.yMw,{fill:"red"}),(0,n.jsx)(s.ZT,{className:"typo edit-btn",variant:"subtitle2",textcolor:"red",onClick:()=>_("recivecode"),children:"ویرایش شماره موبایل"})]})]}),(0,n.jsx)(s.zx,{onClick:()=>{R({verificationCode:q("VerificationCode"),mobileNumber:B.phNumber,code:E})},variant:"question",position:"fixed",disabled:!!(null===(I=H.VerificationCode)||void 0===I?void 0:I.message)||!q("VerificationCode"),children:X?(0,n.jsx)(s.tG,{justify:"center",children:(0,n.jsx)(f(),{color:"#ffff",type:"spin",width:20,height:20})}):(0,n.jsx)(s.ZT,{variant:"subtitle1",children:"مشاهده برنامه"})})]})})};let v=b.zo.section.withConfig({componentId:"sc-c165532d-0"})(["padding-inline:16px;position:relative;padding-block:100px 40px;max-width:600px;margin:auto;display:flex;flex-direction:column;gap:20px;direction:rtl;input{::placeholder{opacity:50%;}}& .InputContainer:focus-within{border:",";}"],e=>{let{errorTesxt:i}=e;return i?"1.5px solid red":"2px solid #02857a"}),N=b.zo.div.withConfig({componentId:"sc-c165532d-1"})(["display:flex;align-items:center;gap:5px;border:",";height:50px;border-radius:4px;padding-inline:8px;cursor:pointer;input{outline:none;height:100%;width:100%;border:none;font-size:16px;color:",";}p{color:",";font-size:14px;}svg{scale:1.4;fill:red;}"],e=>{let{errorTesxt:i}=e;return i?"1.5px solid red":"1.5px solid #02857a"},e=>{let{errorTesxt:i}=e;return i?"red":"#000"},e=>{let{errorTesxt:i}=e;return i?"red":"#000"}),j=b.zo.p.withConfig({componentId:"sc-c165532d-2"})(["position:absolute;bottom:35px;font-size:10px;color:red;right:25px;"]),C=(0,b.zo)(s.tG).withConfig({componentId:"sc-c165532d-3"})(["padding-block:20px;.typo{font-size:12px;margin-right:5px;}.edit-btn{cursor:pointer;}"]),w=b.zo.button.withConfig({componentId:"sc-c165532d-4"})(["border-style:none;appearance:none;background-color:#fff;cursor:pointer;&:disabled{box-shadow:none;cursor:not-allowed;}"])},9583:function(e,i,o){"use strict";o.d(i,{U:function(){return r},l:function(){return t}});var n=o(694);let r=async(e,i,o)=>(await n.j.get("/login/setPhone.php",{params:{phoneNumber:e,href:i,token:o}})).data,t=async(e,i,o,r)=>(await n.j.get("/login/verifyPhone.php",{params:{phoneNumber:"".concat(e),verification:i,code:o,href:r}})).data}},function(e){e.O(0,[7240,5452,6051,5539,6252,8732,3633,9573,1865,9482,816,3176,2971,4938,1744],function(){return e(e.s=81791)}),_N_E=e.O()}]);